<form class="{{cssClass}} flexcol" autocomplete="off">

  {{!-- Sheet Header --}}
  <header class="sheet-header">
    <div class="header-fields">
      <div class="flexrow">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
        <div style="margin-top: auto; margin-bottom: auto;">
          <div class="resource-content flexrow flex-center">
            {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
            <input name="data.teen.basic.name" type="text" value="{{data.teen.basic.name}}" placeholder="Name" style="font-weight:bold"/>
            {{else}}
            <input name="name" type="text" value="{{actor.name}}" placeholder="Name" style="font-weight:bold"/>
            {{/if}}
            {{#if (eq data.settings.gameMode.current "Unmasked")}}
            &nbsp;<div class="item-quantity" style="flex: 0 0 80px;"><select name="data.settings.gameMode.currentSheet" style="width: 80px;">
              {{#select data.settings.gameMode.currentSheet}}
              <option value="{{data.settings.gameMode.maskForm}}">{{data.settings.gameMode.maskForm}}</option>
              <option value="{{data.settings.gameMode.teenForm}}">{{data.settings.gameMode.teenForm}}</option>
              {{/select}}
            </select></div>
            {{/if}}
          </div>
          <div class="resource-content flexrow flex-center">
            <label style="flex: 0 0 35px;">{{#if (eq data.settings.gameMode.currentSheet "Teen")}}is{{else}}is&nbsp;a{{/if}}</label>
            {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
            <input name="data.teen.basic.descriptor" type="text" value="{{data.teen.basic.descriptor}}" data-dtype="String" placeholder="Descriptor"/>
            {{else}}
            <input name="data.basic.descriptor" type="text" value="{{data.basic.descriptor}}" data-dtype="String" placeholder="Descriptor"/>
            {{/if}}
            {{#unless (eq data.settings.gameMode.currentSheet "Teen")}}
            &nbsp;<input name="data.basic.type" type="text" value="{{data.basic.type}}" data-dtype="String" placeholder="Type"/>
            {{/unless}}
          </div>
          {{#unless (eq data.settings.gameMode.currentSheet "Teen")}}
          <div class="resource-content flexrow flex-center">
            <label style="flex: 0 0 35px;">who</label>
            <input name="data.basic.focus" type="text" value="{{data.basic.focus}}" data-dtype="String" placeholder="Focus"/>
            {{#if data.settings.additionalSentence.active}}&nbsp;<input name="data.basic.additionalSentence" type="text" value="{{data.basic.additionalSentence}}" data-dtype="String" placeholder="{{#if (eq data.settings.additionalSentence.name '')}}God of Dominion{{else}}{{data.settings.additionalSentence.name}}{{/if}}"/>{{/if}}
          </div>
          {{/unless}}
            
          <div class="resource-content flex-center" style="margin-top: 5px">
            <input type="checkbox" name="data.advancement.advStats" data-dtype="boolean" {{checked data.advancement.advStats}}>
            +4 Stat Pools&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="checkbox" name="data.advancement.advEffort" data-dtype="boolean" {{checked data.advancement.advEffort}}>
            +1 Effort&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="checkbox" name="data.advancement.advEdge" data-dtype="boolean" {{checked data.advancement.advEdge}}>
            +1 Edge&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="checkbox" name="data.advancement.advSkill" data-dtype="boolean" {{checked data.advancement.advSkill}}>
            Skill&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="checkbox" name="data.advancement.advOther" data-dtype="boolean" {{checked data.advancement.advOther}}>
            Other
          </div>
        </div>
      </div>
      {{!-- The grid classes are defined in scss/global/_grid.scss. To use,
        use both the "grid" and "grid-Ncol" class where "N" can be any number
        from 1 to 12 and will create that number of columns.  --}}
        <div class="resources grid grid-4col">
          {{!-- "flex-group-center" is also defined in the _grid.scss file
          and it will add a small amount of padding, a border, and will
          center all of its child elements content and text. --}}
          <div class="resource flex-group-center">
            <label for="data.basic.tier" class="resource-label">Tier</label>
            <div class="resource-content flexrow flex-center flex-between">
              <input type="text" name="data.basic.tier" value="{{data.basic.tier}}" data-dtype="Number"/>
            </div>
          </div>
          <div class="resource flex-group-center">
            <label for="data.basic.effort" class="resource-label">Effort</label>
            <div class="resource-content flexrow flex-center flex-between">
              <input type="text" name="data.basic.effort" value="{{data.basic.effort}}" data-dtype="Number"/>
            </div>
          </div>
          <div class="resource flex-group-center">
            <label for="data.basic.cypherLimit" class="resource-label">Cypher Limit</label>
            <div class="resource-content flexrow flex-center flex-between">
              <input type="text" name="data.basic.cypherLimit" value="{{data.basic.cypherLimit}}" data-dtype="Number"/>
            </div>
          </div>
          <div class="resource flex-group-center">
            <label for="data.basic.xp" class="resource-label">XP</label>
            <div class="resource-content flexrow flex-center flex-between">
              <input type="text" name="data.basic.xp" value="{{data.basic.xp}}" data-dtype="Number"/>
            </div>
          </div>
        </div>
        {{!-- The grid classes are defined in scss/global/_grid.scss. To use,
          use both the "grid" and "grid-Ncol" class where "N" can be any number
          from 1 to 12 and will create that number of columns.  --}}
          <div class="resources grid grid-{{#if data.additionalPool.active}}4{{else}}3{{/if}}col">
            <div class="resource flex-group-center">
              <label for="data.pools.might" class="resource-label">Might</label>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.might" value="{{data.teen.pools.might}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.might" value="{{data.pools.might}}" data-dtype="Number"/>
                {{/if}}
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                <label for="data.pools.mightPool" class="resource-label-normal">Pool</label>
                <label for="data.pools.mightEdge" class="resource-label-normal">Edge</label>
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.mightPool" value="{{data.teen.pools.mightPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.teen.pools.mightEdge" value="{{data.teen.pools.mightEdge}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.mightPool" value="{{data.pools.mightPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.pools.mightEdge" value="{{data.pools.mightEdge}}" data-dtype="Number"/>
                {{/if}}
              </div>
            </div>
            <div class="resource flex-group-center">
              <label for="data.pools.speed" class="resource-label">Speed</label>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.speed" value="{{data.teen.pools.speed}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.speed" value="{{data.pools.speed}}" data-dtype="Number"/>
                {{/if}}
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                <label for="data.pools.speedPool" class="resource-label-normal">Pool</label>
                <label for="data.pools.speedEdge" class="resource-label-normal">Edge</label>
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.speedPool" value="{{data.teen.pools.speedPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.teen.pools.speedEdge" value="{{data.teen.pools.speedEdge}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.speedPool" value="{{data.pools.speedPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.pools.speedEdge" value="{{data.pools.speedEdge}}" data-dtype="Number"/>
                {{/if}}
              </div>
            </div>
            <div class="resource flex-group-center">
              <label for="data.pools.intellect" class="resource-label">Intellect</label>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.intellect" value="{{data.teen.pools.intellect}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.intellect" value="{{data.pools.intellect}}" data-dtype="Number"/>
                {{/if}}
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                <label for="data.pools.intellectPool" class="resource-label-normal">Pool</label>
                <label for="data.pools.intellectEdge" class="resource-label-normal">Edge</label>
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <input type="text" name="data.teen.pools.intellectPool" value="{{data.teen.pools.intellectPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.teen.pools.intellectEdge" value="{{data.teen.pools.intellectEdge}}" data-dtype="Number"/>
                {{else}}
                <input type="text" name="data.pools.intellectPool" value="{{data.pools.intellectPool}}" data-dtype="Number"/>&nbsp;
                <input type="text" name="data.pools.intellectEdge" value="{{data.pools.intellectEdge}}" data-dtype="Number"/>
                {{/if}}
              </div>
            </div>
            {{#if data.additionalPool.active}}
            <div class="resource flex-group-center">
              <label for="data.additionalPool.additionalPoolName" class="resource-label">{{#if (eq data.additionalPool.additionalPoolName "")}}Luck{{else}}{{data.additionalPool.additionalPoolName}}{{/if}}</label>
              <div class="resource-content flexrow flex-center flex-between">
                <input type="text" name="data.additionalPool.additionalPoolValue" value="{{data.additionalPool.additionalPoolValue}}" data-dtype="Number"/>
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                <label for="data.pools.intellectPool" class="resource-label-normal">Pool</label>
              </div>
              <div class="resource-content flexrow flex-center flex-between">
                <input type="text" name="data.additionalPool.additionalPoolMax" value="{{data.additionalPool.additionalPoolMax}}" data-dtype="Number"/>&nbsp;
              </div>
            </div>
            {{/if}}
          </div>
        </div>
      </header>

      {{!-- Sheet Tab Navigation --}}
      <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="skills">Skills</a>
        <a class="item" data-tab="combat">Combat</a>
        <a class="item" data-tab="abilities">Abilities</a>
        <a class="item" data-tab="items">Equipment</a>
        <a class="item" data-tab="description">Notes</a>
        <a class="item" data-tab="settings" style="flex: 0 0 0px; text-align: right;"><i class="fas fa-cog"></i></a>
      </nav>

      {{!-- Sheet Body --}}
      <section class="sheet-body">

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
          {{editor content=data.basic.notes target="data.basic.notes" button=true owner=owner editable=editable}}
        </div>

        {{!-- Owned Skills Tab --}}
        <div class="tab items" data-group="primary" data-tab="skills">
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Skills</div>
                <div class="item-quantity">Rating</div>
                <div class="item-controls">
                  {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                  <a class="item-control item-create" title="Create item" data-type="teen Skill"><i class="fas fa-plus"></i></a>
                  {{else}}
                  <a class="item-control item-create" title="Create item" data-type="skill"><i class="fas fa-plus"></i></a>
                  {{/if}}
                </div>
              </li>
              {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
              {{#each actor.teenSkills as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity" style="color: {{#if (eq data.skillLevel 'Inability')}}red{{/if}}{{#if (eq data.skillLevel 'Trained')}}green{{/if}}{{#if (eq data.skillLevel 'Specialized')}}blue{{/if}}">{{data.skillLevel}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{else}}
              {{#each actor.skills as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity" style="color: {{#if (eq data.skillLevel 'Inability')}}red{{/if}}{{#if (eq data.skillLevel 'Trained')}}green{{/if}}{{#if (eq data.skillLevel 'Specialized')}}blue{{/if}}">{{data.skillLevel}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{/if}}
            </ol>
          </div>
          
          {{#unless (eq data.settings.gameMode.currentSheet "Teen")}}
          {{#if data.settings.powerShifts.active}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">{{#if (eq data.settings.powerShifts.powerShiftsName "")}}Power Shifts{{else}}{{data.settings.powerShifts.powerShiftsName}}{{/if}}</div>
                <div class="item-quantity">Shifts</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="power Shift"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.powerShifts as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity">{{data.powerShiftValue}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
          {{/if}}
          {{/unless}}
        </div>
        
        {{!-- Combat Tab --}}
        <div class="tab items" data-group="primary" data-tab="combat">
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Damage Track & Recovery Rolls</div>
              </li>
              <li class="item flexrow">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <div class="item-damage">
                  <select name="data.teen.damage.damageTrack" style="width: 92px">
                    {{#select data.teen.damage.damageTrack}}
                    <option value="{{data.teen.damage.hale}}">{{data.teen.damage.hale}}</option>
                    <option value="{{data.teen.damage.impaired}}">{{data.teen.damage.impaired}}</option>
                    <option value="{{data.teen.damage.debilitated}}">{{data.teen.damage.debilitated}}</option>
                    {{/select}}
                  </select>
                </div>
                <div class="centered-content" style="height: 38px; line-height: 1.4">
                  {{#if (eq data.teen.damage.damageTrack "Hale")}}No effect.{{/if}}
                  {{#if (eq data.teen.damage.damageTrack "Impaired")}}Effort costs +1 per level. Ignore minor and major effect results on rolls.<br>Combat roll of 17-20 deals only +1 damage.{{/if}}
                  {{#if (eq data.teen.damage.damageTrack "Debilitated")}}Can’t take actions other than moving an immediate distance.<br>Cannot move if Speed Pool is 0.{{/if}}
                </div>
                {{else}}
                <div class="item-damage">
                  <select name="data.damage.damageTrack" style="width: 92px">
                    {{#select data.damage.damageTrack}}
                    <option value="{{data.damage.hale}}">{{data.damage.hale}}</option>
                    <option value="{{data.damage.impaired}}">{{data.damage.impaired}}</option>
                    <option value="{{data.damage.debilitated}}">{{data.damage.debilitated}}</option>
                    {{/select}}
                  </select>
                </div>
                <div class="centered-content" style="height: 38px; line-height: 1.4">
                  {{#if (eq data.damage.damageTrack "Hale")}}No effect.{{/if}}
                  {{#if (eq data.damage.damageTrack "Impaired")}}Effort costs +1 per level. Ignore minor and major effect results on rolls.<br>Combat roll of 17-20 deals only +1 damage.{{/if}}
                  {{#if (eq data.damage.damageTrack "Debilitated")}}Can’t take actions other than moving an immediate distance.<br>Cannot move if Speed Pool is 0.{{/if}}
                </div>
                {{/if}}
              </li>
              <li class="item flexrow">
                <div class="item-quantity"><input style="line-height: normal; margin: auto; width: 92px; display: flex; align-content: center;" name="data.recoveries.recoveryRoll" type="text" value="{{data.recoveries.recoveryRoll}}" data-dtype="String" placeholder="1d6+1"/></div>
                <div class="resource-content flex-center" style="margin-top: auto; margin-bottom: auto;">
                  <input type="checkbox" name="data.recoveries.oneAction" data-dtype="boolean" {{checked data.recoveries.oneAction}}/>
                  {{#unless (eq data.settings.gameMode.currentSheet "Teen")}}
                  {{#if data.settings.additionalRecoveries.active}}
                  {{#if (gte data.settings.additionalRecoveries.howManyRecoveries 1)}}<input type="checkbox" name="data.recoveries.oneActionTwo" data-dtype="boolean" {{checked data.recoveries.oneActionTwo}}/>{{/if}}
                  {{#if (gte data.settings.additionalRecoveries.howManyRecoveries 2)}}<input type="checkbox" name="data.recoveries.oneActionThree" data-dtype="boolean" {{checked data.recoveries.oneActionThree}}/>{{/if}}
                  {{#if (gte data.settings.additionalRecoveries.howManyRecoveries 3)}}<input type="checkbox" name="data.recoveries.oneActionFour" data-dtype="boolean" {{checked data.recoveries.oneActionFour}}/>{{/if}}
                  {{#if (gte data.settings.additionalRecoveries.howManyRecoveries 4)}}<input type="checkbox" name="data.recoveries.oneActionFive" data-dtype="boolean" {{checked data.recoveries.oneActionFive}}/>{{/if}}
                  {{/if}}
                  {{/unless}}
                  1 Action&nbsp;&nbsp;&nbsp;&nbsp;
                  <input type="checkbox" name="data.recoveries.tenMinutes" data-dtype="boolean" {{checked data.recoveries.tenMinutes}}/>
                  10 Minutes&nbsp;&nbsp;&nbsp;&nbsp;
                  <input type="checkbox" name="data.recoveries.oneHour" data-dtype="boolean" {{checked data.recoveries.oneHour}}/>
                  1 Hour&nbsp;&nbsp;&nbsp;&nbsp;
                  <input type="checkbox" name="data.recoveries.tenHours" data-dtype="boolean" {{checked data.recoveries.tenHours}}/>
                  10 Hours
                </div>
              </li>
            </ol>
          </div>
          
          {{#if data.settings.lastingDamage.active}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Lasting Damage</div>
                <div class="item-quantity">Damage</div>
                <div class="item-controls">
                  {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                  <a class="item-control item-create" title="Create item" data-type="teen lasting Damage"><i class="fas fa-plus"></i></a>
                  {{else}}
                  <a class="item-control item-create" title="Create item" data-type="lasting Damage"><i class="fas fa-plus"></i></a>
                  {{/if}}
                </div>
              </li>
              {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
              {{#each actor.teenLastingDamage as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">
                  {{item.name}} ({{data.lastingDamagePool}}{{#if data.permanentDamage}}, permanent{{/if}}){{#unless (eq data.lastingDamageEffect "")}}: {{data.lastingDamageEffect}}{{/unless}}
                </h4>
                {{#if (eq data.lastingDamageAmount 1)}}
                <div class="item-quantity">{{data.lastingDamageAmount}} point</div>
                {{else}}
                <div class="item-quantity">{{data.lastingDamageAmount}} points</div>
                {{/if}}
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{else}}
              {{#each actor.lastingDamage as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">
                  {{item.name}} ({{data.lastingDamagePool}}{{#if data.permanentDamage}}, permanent{{/if}}){{#unless (eq data.lastingDamageEffect "")}}: {{data.lastingDamageEffect}}{{/unless}}
                </h4>
                {{#if (eq data.lastingDamageAmount 1)}}
                <div class="item-quantity">{{data.lastingDamageAmount}} point</div>
                {{else}}
                <div class="item-quantity">{{data.lastingDamageAmount}} points</div>
                {{/if}}
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{/if}}
            </ol>
          </div>
          {{/if}}
           
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Attacks</div>
                <div class="item-quantity">Damage</div>
                <div class="item-controls">
                  {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                  <a class="item-control item-create" title="Create item" data-type="teen Attack"><i class="fas fa-plus"></i></a>
                  {{else}}
                  <a class="item-control item-create" title="Create item" data-type="attack"><i class="fas fa-plus"></i></a>
                  {{/if}}
                </div>
              </li>
              {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
              {{#each actor.teenAttacks as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">
                  {{item.name}} 
                  ({{data.attackType}}{{#if (eq data.modifiedBy 1)}}, {{data.modified}}{{/if}}{{#if (gt data.modifiedBy 1)}}, {{data.modified}} by {{data.modifiedBy}} steps{{/if}}{{#unless (eq data.range "")}}, {{data.range}}{{/unless}}{{#unless (eq data.notes "")}}, {{data.notes}}{{/unless}})
                </h4>
                {{#if (eq data.damage 1)}}
                <div class="item-quantity">{{data.damage}} point</div>
                {{else}}
                <div class="item-quantity">{{data.damage}} points</div>
                {{/if}}
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{else}}
              {{#each actor.attacks as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">
                  {{item.name}} 
                  ({{data.attackType}}{{#if (eq data.modifiedBy 1)}}, {{data.modified}}{{/if}}{{#if (gt data.modifiedBy 1)}}, {{data.modified}} by {{data.modifiedBy}} steps{{/if}}{{#unless (eq data.range "")}}, {{data.range}}{{/unless}}{{#unless (eq data.notes "")}}, {{data.notes}}{{/unless}})
                </h4>
                {{#if (eq data.damage 1)}}
                <div class="item-quantity">{{data.damage}} point</div>
                {{else}}
                <div class="item-quantity">{{data.damage}} points</div>
                {{/if}}
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{/if}}
            </ol>
          </div>
        
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Armor</div>
                <div class="item-quantity">Active</div>
                <div class="item-quantity">Speed Cost</div>
                <div class="item-quantity">Rating</div>
                <div class="item-controls">
                  {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                  <a class="item-control item-create" title="Create item" data-type="teen Armor"><i class="fas fa-plus"></i></a>
                  {{else}}
                  <a class="item-control item-create" title="Create item" data-type="armor"><i class="fas fa-plus"></i></a>
                  {{/if}}
                </div>
              </li>
              {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
              {{#each actor.teenArmor as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}} ({{data.armorType}}{{#unless (eq data.notes "")}}, {{data.notes}}{{/unless}})</h4>
                <div class="item-quantity">{{#if data.armorActive}}<i class="fa fa-check" aria-hidden="true">{{/if}}</i></div>
                <div class="item-quantity">{{data.speedCost}}</div>
                <div class="item-quantity">{{data.armorValue}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{else}}
              {{#each actor.armor as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}} ({{data.armorType}}{{#unless (eq data.notes "")}}, {{data.notes}}{{/unless}})</h4>
                <div class="item-quantity">{{#if data.armorActive}}<i class="fa fa-check" aria-hidden="true">{{/if}}</i></div>
                <div class="item-quantity">{{data.speedCost}}</div>
                <div class="item-quantity">{{data.armorValue}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
              {{/if}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name"><b>Total</b></h4>
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <div class="item-quantity"><b>{{data.teen.armor.speedCostTotal}}</b></div>
                <div class="item-quantity"><b>{{data.teen.armor.armorValueTotal}}</b></div>
                {{else}}
                <div class="item-quantity"><b>{{data.armor.speedCostTotal}}</b></div>
                <div class="item-quantity"><b>{{data.armor.armorValueTotal}}</b></div>
                {{/if}}
                <div class="item-controls">
                </div>
              </li>
            </ol>
          </div>
        </div>

        {{!-- Owned Items Tab --}}
        <div class="tab items" data-group="primary" data-tab="items">
          
          {{#if data.settings.currency.active}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header" style="border-bottom: none; padding: 0px 0px">
                <div class="item-name"></div>
                <div class="item-right" style="flex: 0 0 200px">{{#if (eq data.settings.currency.name "")}}Shins{{else}}{{data.settings.currency.name}}{{/if}}: <input type="text" name="data.settings.currency.quantity" value="{{data.settings.currency.quantity}}" data-dtype="Number" style="width: 80px; text-align: center;"/></div>
              </li>
            </ol>
          </div>
          {{/if}}
          
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Items</div>
                <div class="item-quantity">Quantity</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="equipment"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.equipment as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity">{{data.quantity}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
        
          {{#if data.settings.equipment.cyphers}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Cyphers</div>
                <div class="item-quantity">Level</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="cypher"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.cyphers as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity">{{data.level}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
          {{/if}}
          
          {{#if data.settings.equipment.artifacts}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Artifacts</div>
                <div class="item-quantity">Depletion</div>
                <div class="item-quantity">Level</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="artifact"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.artifacts as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity">{{data.depletion}}</div>
                <div class="item-quantity">{{data.level}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
          {{/if}}
        
          {{#if data.settings.equipment.oddities}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Oddities</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="oddity"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.oddities as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
          {{/if}}
          
          {{#if data.settings.equipment.materials}}
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">{{#if (eq data.settings.equipment.materialName "")}}Iotum & Parts{{else}}{{data.settings.equipment.materialName}}{{/if}}</div>
                <div class="item-quantity">Units</div>
                <div class="item-controls">
                  <a class="item-control item-create" title="Create item" data-type="material"><i class="fas fa-plus"></i></a>
                </div>
              </li>
              {{#each actor.materials as |item id|}}
              <li class="item flexrow" data-item-id="{{item._id}}">
                <h4 class="item-name">{{item.name}}</h4>
                <div class="item-quantity">{{data.quantity}}</div>
                <div class="item-controls">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </li>
              {{/each}}
            </ol>
          </div>
          {{/if}}
          
        </div>

        {{!-- Owned Abilities Tab --}}
        <div class="tab items" data-group="primary" data-tab="abilities">
          <ol class="items-list">
            <li class="item flexrow item-header">
              <div class="item-name">Abilities</div>
              <div class="item-controls">
                {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
                <a class="item-control item-create" title="Create item" data-type="teen Ability"><i class="fas fa-plus"></i></a>
                {{else}}
                <a class="item-control item-create" title="Create item" data-type="ability"><i class="fas fa-plus"></i></a>
                {{/if}}
              </div>
            </li>
            {{#if (eq data.settings.gameMode.currentSheet "Teen")}}
            {{#each actor.teenAbilities as |item id|}}
            <li class="item flexrow" data-item-id="{{item._id}}">
              {{#if (lt data.costPoints 1)}}
              <h4 class="item-name">{{item.name}}</h4>
              {{/if}}
              {{#if (eq data.costPoints 1)}}
              <h4 class="item-name">{{item.name}} ({{data.costPoints}} {{data.costPool}} point)</h4>
              {{/if}}
              {{#if (gt data.costPoints 1)}}
              <h4 class="item-name">{{item.name}} ({{data.costPoints}} {{data.costPool}} points)</h4>
              {{/if}}
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
            {{else}}
            {{#each actor.abilities as |item id|}}
            <li class="item flexrow" data-item-id="{{item._id}}">
              {{#if (lt data.costPoints 1)}}
              <h4 class="item-name">{{item.name}}</h4>
              {{/if}}
              {{#if (eq data.costPoints 1)}}
              <h4 class="item-name">{{item.name}} ({{data.costPoints}} {{data.costPool}} point)</h4>
              {{/if}}
              {{#if (gt data.costPoints 1)}}
              <h4 class="item-name">{{item.name}} ({{data.costPoints}} {{data.costPool}} points)</h4>
              {{/if}}
              <div class="item-controls">
                <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </li>
            {{/each}}
            {{/if}}
          </ol>
        </div>

        {{!-- Settings Tab --}}
        <div class="tab items" data-group="primary" data-tab="settings">
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">General Settings</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.gameMode.active" data-dtype="boolean" {{checked data.settings.gameMode.active}} disabled> Game Mode</div> 
                <div class="item-quantity"><select name="data.settings.gameMode.current" style="width: 135px">
                  {{#select data.settings.gameMode.current}}
                  <option value="{{data.settings.gameMode.cypher}}">{{data.settings.gameMode.cypher}}</option>
                  <option value="{{data.settings.gameMode.unmasked}}">{{data.settings.gameMode.unmasked}}</option>
                  {{/select}}
                </select></div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.initiative.active" data-dtype="boolean" {{checked data.settings.initiative.active}} disabled> Bonus to Initiative Rolls</div> 
                <div class="item-quantity"><input name="data.settings.initiative.initiativeBonus" type="text" value="{{data.settings.initiative.initiativeBonus}}" data-dtype="Number" placeholder="0" style="width: auto;"/></div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.additionalSentence.active" data-dtype="boolean" {{checked data.settings.additionalSentence.active}}> Additional Sentence Field</div>
                <div class="item-quantity"><input name="data.settings.additionalSentence.name" type="text" value="{{data.settings.additionalSentence.name}}" data-dtype="String" placeholder="God of Dominion" style="width: auto;"/></div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.additionalPool.active" data-dtype="boolean" {{checked data.additionalPool.active}}> Additional Pool</div>
                <div class="item-quantity"><input name="data.additionalPool.additionalPoolName" type="text" value="{{data.additionalPool.additionalPoolName}}" data-dtype="String" placeholder="Luck" style="width: auto;"/></div>
              </li>
            </ol>
          </div>
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Skills Tab</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.powerShifts.active" data-dtype="boolean" {{checked data.settings.powerShifts.active}}> Power Shifts</div>
                <div class="item-quantity"><input name="data.settings.powerShifts.powerShiftsName" type="text" value="{{data.settings.powerShifts.powerShiftsName}}" data-dtype="String" placeholder="Power Shifts" style="width: auto;"/></div>
              </li>
            </ol>
          </div>
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Combat Tab</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.additionalRecoveries.active" data-dtype="boolean" {{checked data.settings.additionalRecoveries.active}}> Additional Recovery Rolls</div>
                <div class="item-quantity"><select name="data.settings.additionalRecoveries.howManyRecoveries" style="width: 135px">
                  {{#select data.settings.additionalRecoveries.howManyRecoveries}}
                  <option value="{{data.settings.additionalRecoveries.additionalOne}}">{{data.settings.additionalRecoveries.additionalOne}}</option>
                  <option value="{{data.settings.additionalRecoveries.additionalTwo}}">{{data.settings.additionalRecoveries.additionalTwo}}</option>
                  <option value="{{data.settings.additionalRecoveries.additionalThree}}">{{data.settings.additionalRecoveries.additionalThree}}</option>
                  <option value="{{data.settings.additionalRecoveries.additionalFour}}">{{data.settings.additionalRecoveries.additionalFour}}</option>
                  {{/select}}
                </select></div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.lastingDamage.active" data-dtype="boolean" {{checked data.settings.lastingDamage.active}}> Lasting/Permanent Damage</div>
              </li>
            </ol>
          </div>
          <div class="flexrow">
            <ol class="items-list">
              <li class="item flexrow item-header">
                <div class="item-name">Equipment Tab</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.currency.active" data-dtype="boolean" {{checked data.settings.currency.active}}> Currency</div>
                <div class="item-quantity"><input name="data.settings.currency.name" type="text" value="{{data.settings.currency.name}}" data-dtype="String" placeholder="Shins" style="width: auto;"/></div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.equipment.cyphers" data-dtype="boolean" {{checked data.settings.equipment.cyphers}}> Cyphers</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.equipment.artifacts" data-dtype="boolean" {{checked data.settings.equipment.artifacts}}> Artifacts</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.equipment.oddities" data-dtype="boolean" {{checked data.settings.equipment.oddities}}> Oddities</div>
              </li>
              <li class="item flexrow item-settings">
                <div class="item-name"><input type="checkbox" name="data.settings.equipment.materials" data-dtype="boolean" {{checked data.settings.equipment.materials}}> Crafting Material</div>
                <div class="item-quantity"><input name="data.settings.equipment.materialName" type="text" value="{{data.settings.equipment.materialName}}" data-dtype="String" placeholder="Iotum & Parts" style="width: auto;"/></div>
              </li>
            </ol>
          </div>
          
        </div>
        
      </section>
    </form>